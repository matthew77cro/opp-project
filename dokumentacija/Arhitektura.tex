\chapter{Arhitektura i dizajn sustava}
		
		\textbf{\textit{dio 1. revizije}}\\

		\textit{ Potrebno je opisati stil arhitekture te identificirati: podsustave, preslikavanje na radnu platformu, spremišta podataka, mrežne protokole, globalni upravljački tok i sklopovsko-programske zahtjeve. Po točkama razraditi i popratiti odgovarajućim skicama:}
	\begin{itemize}
		\item 	\textit{izbor arhitekture temeljem principa oblikovanja pokazanih na predavanjima (objasniti zašto ste baš odabrali takvu arhitekturu)}
		\item 	\textit{organizaciju sustava s najviše razine apstrakcije (npr. klijent-poslužitelj, baza podataka, datotečni sustav, grafičko sučelje)}
		\item 	\textit{organizaciju aplikacije (npr. slojevi frontend i backend, MVC arhitektura) }		
	\end{itemize}

	
		

		

				
		\section{Baza podataka}
			
			
		Za potrebe našeg sustava koristit ćemo SQL relacijsku bazu podataka. Relacijska baza podataka najviše nam odgovara zbog olakšanog modeliranja događaja i entiteta iz stvarnog svijeta. Osnovna jedinka baze podataka je relacija, to jest tablica koja ima svoj naziv i potreban skup atributa. Zadaća baze podataka je brza i jednostavna pohrana, izmjena i dohvat podataka koje potom treba obraditi. Sve su relacije u bazi svedene na treću normalnu formu kako baza ne bi sadržavala redundantne podatke. Prilikom izrade baze podataka poslužili smo se PostgreSQL-om.
		Baza podataka ove aplikacije sastoji se od sljedećih entiteta:
		\begin{itemize}
			\item 	Profil
			\item 	KorisničkiRačun
			\item 	Uloga
			\item   TipUloge
			\item   Klijent
			\item   Djelatnik
			\item   Bankar
			\item   Administrator
			\item   SlužbenikZaOdobravanjeKredita
			\item   Banka
			\item   Kredit
			\item   Transakcija
			\item   Račun
			\item   VrstaRačuna
			\item   TekućiRačun
			\item   ŠtedniRačun
			\item   ŽiroRačun
			\item   Kartica
			\item   VrstaKartice
			\item   DebitnaKartica
			\item   KreditnaKartica
			\item   Kamata		
		\end{itemize}
		
			\subsection{Opis tablica}
			

				\textbf{Profil} Ovaj entitet sadrži sve važne informacije za pristup web aplikaciji. Sadrži atribute: ime, prezime, OIB, korisničko ime, adresa prebivališta, datum rođenja, e-mail adresa, slika profila i broj tipa uloge. Ovaj entitet u vezi je \textit{Zero-to-Many} s entitetom Korisnički račun preko korisničkog imena.  
				
				\begin{longtabu} to \textwidth {|X[6, l]|X[6, l]|X[20, l]|}
					
					\hline \multicolumn{3}{|c|}{\textbf{Profil }}	 \\[3pt] \hline
					\endfirsthead
					
					\hline \multicolumn{3}{|c|}{\textbf{Profil}}	 \\[3pt] \hline
					\endhead
					
					\hline 
					\endlastfoot
					
					\cellcolor{LightGreen}Ime & VARCHAR	&  	ime korisnika 	\\ \hline
					Prezime	& VARCHAR &  prezime korisnika 	\\ \hline 
					OIB & INT &  OIB korisnika \\ \hline 
					Korisničko ime & VARCHAR	&  	jedinstveni identifikator korisnika	\\ \hline 
					Adresa prebivališta & VARCHAR &   adresa korisnika      \\ \hline
					Datum rođenja & DATE & datum rođenja korisnika \\ \hline
					Email & VARCHAR & e-mail adresa korisnika \\ \hline
					Slika & LONGBLOB & slika korisnika \\ \hline
					Tip uloge & INT & broj tipa uloge \\ \hline
					 
					
					
				\end{longtabu}
			
			\textbf{Korisnički Račun}  Ovaj entitet sadrži sve važne informacije vezane za korisnički račun koji je dodijeljen svakom korisniku koji želi koristiti ovu web aplikaciju. Sadrži atribute: Korisničko ime, lozinku, OIB, ime i prezime korisnika te broj tipa uloge. Ovaj je entitet u vezi \textit{Many-to-Zero} s entitetom Profil preko korisničkog imena i u vezi \textit{One-to-One} s entitetom Uloga preko OIB-a korisnika.  
			
			\begin{longtabu} to \textwidth {|X[6, l]|X[6, l]|X[20, l]|}
				
				\hline \multicolumn{3}{|c|}{\textbf{Korisnički račun }}	 \\[3pt] \hline
				\endfirsthead
				
				\hline \multicolumn{3}{|c|}{\textbf{Korisnički račun}}	 \\[3pt] \hline
				\endhead
				
				\hline 
				\endlastfoot
				
				\cellcolor{LightGreen}Korisničko ime & VARCHAR	&  jedinstveni identifikator korisnika ( profil.korisničko ime) 	\\ \hline
				Lozinka	& VARCHAR &   hash lozinke	\\ \hline 
				OIB & INT & OIB korisnika (profil.oib)  \\ \hline
				Ime & VARCHAR &  ime korisnika (profil.ime)  \\ \hline 
				Prezime & VARCHAR	& prezime korisnika 		\\ \hline 
				\cellcolor{LightBlue} Tip uloge	& INT &  broj tipa uloge(profil.tip uloge) 	\\ \hline 
				
				
			\end{longtabu}
		
		\textbf{Uloga}  
		
		\begin{longtabu} to \textwidth {|X[6, l]|X[6, l]|X[20, l]|}
			
			\hline \multicolumn{3}{|c|}{\textbf{Uloga}}	 \\[3pt] \hline
			\endfirsthead
			
			\hline \multicolumn{3}{|c|}{\textbf{Uloga}}	 \\[3pt] \hline
			\endhead
			
			\hline 
			\endlastfoot
			
			\cellcolor{LightGreen}Tip uloge & INT	&  Broj tipa uloge	\\ \hline
			Naziv	& VARCHAR & Naziv uloge  	\\ \hline 
			 
			
			
		\end{longtabu}
	
		\textbf{Klijent}  
	
	\begin{longtabu} to \textwidth {|X[6, l]|X[6, l]|X[20, l]|}
		
		\hline \multicolumn{3}{|c|}{\textbf{Klijent}}	 \\[3pt] \hline
		\endfirsthead
		
		\hline \multicolumn{3}{|c|}{\textbf{Klijent}}	 \\[3pt] \hline
		\endhead
		
		\hline 
		\endlastfoot
		
			\cellcolor{LightGreen}Ime & VARCHAR	&  	ime klijenta 	\\ \hline
		Prezime	& VARCHAR &  prezime klijenta 	\\ \hline 
		OIB & INT &  OIB klijenta \\ \hline 
		Korisničko ime & VARCHAR	&  	jedinstveni identifikator korisnika	\\ \hline 
		Lozinka & VARCHAR & hash lozinke \\ \hline
		Adresa prebivališta & VARCHAR &   adresa klijenta      \\ \hline
		Datum rođenja & DATE & datum rođenja klijenta \\ \hline
		Email & VARCHAR & e-mail adresa korisnika \\ \hline
		Spol & VARCHAR(1) & spol klijenta \\ \hline
		Slika & LONGBLOB & slika korisnika \\ \hline
		
		
		
		
	\end{longtabu}
			
			
			\subsection{Dijagram baze podataka}
				\textit{ U ovom potpoglavlju potrebno je umetnuti dijagram baze podataka. Primarni i strani ključevi moraju biti označeni, a tablice povezane. Bazu podataka je potrebno normalizirati. Podsjetite se kolegija "Baze podataka".}
			
			\eject
			
			
		\section{Dijagram razreda}
		
			\textit{Potrebno je priložiti dijagram razreda s pripadajućim opisom. Zbog preglednosti je moguće dijagram razlomiti na više njih, ali moraju biti grupirani prema sličnim razinama apstrakcije i srodnim funkcionalnostima.}\\
			
			\textbf{\textit{dio 1. revizije}}\\
			
			\textit{Prilikom prve predaje projekta, potrebno je priložiti potpuno razrađen dijagram razreda vezan uz \textbf{generičku funkcionalnost} sustava. Ostale funkcionalnosti trebaju biti idejno razrađene u dijagramu sa sljedećim komponentama: nazivi razreda, nazivi metoda i vrste pristupa metodama (npr. javni, zaštićeni), nazivi atributa razreda, veze i odnosi između razreda.}\\
			
			\textbf{\textit{dio 2. revizije}}\\			
			
			\textit{Prilikom druge predaje projekta dijagram razreda i opisi moraju odgovarati stvarnom stanju implementacije}
			
			
			
			\eject
		
		\section{Dijagram stanja}
			
			
			\textbf{\textit{dio 2. revizije}}\\
			
			\textit{Potrebno je priložiti dijagram stanja i opisati ga. Dovoljan je jedan dijagram stanja koji prikazuje \textbf{značajan dio funkcionalnosti} sustava. Na primjer, stanja korisničkog sučelja i tijek korištenja neke ključne funkcionalnosti jesu značajan dio sustava, a registracija i prijava nisu. }
			
			
			\eject 
		
		\section{Dijagram aktivnosti}
			
			\textbf{\textit{dio 2. revizije}}\\
			
			 \textit{Potrebno je priložiti dijagram aktivnosti s pripadajućim opisom. Dijagram aktivnosti treba prikazivati značajan dio sustava.}
			
			\eject
		\section{Dijagram komponenti}
		
			\textbf{\textit{dio 2. revizije}}\\
		
			 \textit{Potrebno je priložiti dijagram komponenti s pripadajućim opisom. Dijagram komponenti treba prikazivati strukturu cijele aplikacije.}